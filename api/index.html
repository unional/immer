<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-65632006-3","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<script src="https://buttons.github.io/buttons.js"></script>
<script src="https://media.ethicalads.io/media/client/ethicalads.min.js"></script><title data-react-helmet="true">API overview | Immer</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="API overview | Immer"><meta data-react-helmet="true" name="description" content="| Exported name | Description | Section |"><meta data-react-helmet="true" property="og:description" content="| Exported name | Description | Section |"><meta data-react-helmet="true" property="og:url" content="https://immerjs.github.io//immer/api"><link data-react-helmet="true" rel="shortcut icon" href="/immer/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://immerjs.github.io//immer/api"><link rel="stylesheet" href="/immer/styles.8d39bcb7.css">
<link rel="preload" href="/immer/styles.5695f530.js" as="script">
<link rel="preload" href="/immer/runtime~main.37234080.js" as="script">
<link rel="preload" href="/immer/main.9b3711a3.js" as="script">
<link rel="preload" href="/immer/1.d0155db0.js" as="script">
<link rel="preload" href="/immer/2.b57f8157.js" as="script">
<link rel="preload" href="/immer/30.73c69c5f.js" as="script">
<link rel="preload" href="/immer/935f2afb.211114bc.js" as="script">
<link rel="preload" href="/immer/17896441.b75952fb.js" as="script">
<link rel="preload" href="/immer/5fbc5cf1.ae565c98.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><div class="announcementBar_1JSk" style="background-color:#20232a;color:#fff" role="banner"><div class="announcementBarContent_2EqR">Support Ukraine ðŸ‡ºðŸ‡¦ <a target="_blank" rel="noopener noreferrer" href="https://opensource.fb.com/support-ukraine">Help Provide Humanitarian Aid to Ukraine</a>.</div></div><nav class="navbar navbar--fixed-top navbar--dark"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/immer/"><img src="/immer/img/immer-logo.svg" alt="Immer Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/immer/img/immer-logo.svg" alt="Immer Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Immer</strong></a><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a class="navbar__item navbar__link">en</a><ul class="dropdown__menu"><li><a href="/immer/api" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">en</a></li><li><a href="/immer/zh-CN/api" target="_self" rel="noopener noreferrer" class="dropdown__link">zh-CN</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link navbar__link--active" href="/immer/">Documentation</a><a href="https://github.com/immerjs/immer" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><a class="navbar__item navbar__link navbar__link--active" href="/immer/support">Support Immer</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/immer/"><img src="/immer/img/immer-logo.svg" alt="Immer Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/immer/img/immer-logo.svg" alt="Immer Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Immer</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/immer/">Documentation</a></li><li class="menu__list-item"><a href="https://github.com/immerjs/immer" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/immer/support">Support Immer</a></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="menu__link menu__link--sublist">Languages</a><ul class="menu__list"><li class="menu__list-item"><a href="/immer/api" target="_self" rel="noopener noreferrer" class="menu__link dropdown__link--active">en</a></li><li class="menu__list-item"><a href="/immer/zh-CN/api" target="_self" rel="noopener noreferrer" class="menu__link">zh-CN</a></li></ul></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Basics</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/immer/">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/immer/installation">Installation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/immer/produce">Using produce</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/immer/curried-produce">Curried producers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/immer/example-setstate">React &amp; Immer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/immer/update-patterns">Update patterns</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Advanced Features</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/immer/api">API overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/immer/map-set">Map and Set</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/immer/complex-objects">Classes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/immer/current">Current</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/immer/original">Original</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/immer/patches">Patches</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/immer/freezing">Auto freezing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/immer/return">Returning new data from producers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/immer/async">Async produce / createDraft</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/immer/typescript">TypeScript / Flow</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Resources</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/immer/performance">Immer performance</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/immer/resources">External resources</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/immer/faq">FAQ</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/immer/pitfalls">Pitfalls</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/immer/built-with">Built with Immer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/immer/support">Supporting immer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/immer/other-lang">Porting to other languages</a></li></ul></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">API overview</h1></header><div class="markdown"><center><div data-ea-publisher="immerjs" data-ea-type="image" class="horizontal bordered"></div></center><table><thead><tr><th>Exported name</th><th>Description</th><th>Section</th></tr></thead><tbody><tr><td><code>(default)</code></td><td>The core API of Immer, typically named <code>produce</code>: <code>import produce from &quot;immer&quot;</code></td><td><a href="/immer/produce">Produce</a></td></tr><tr><td><code>applyPatches</code></td><td>Given a base state or draft, and a set of patches, applies the patches</td><td><a href="/immer/patches">Patches</a></td></tr><tr><td><code>castDraft</code></td><td>Converts any immutable type to its mutable counterpart. This is just a cast and doesn&#x27;t actually do anything.</td><td><a href="/immer/typescript">TypeScript</a></td></tr><tr><td><code>castImmutable</code></td><td>Converts any mutable type to its immutable counterpart. This is just a cast and doesn&#x27;t actually do anything.</td><td><a href="/immer/typescript">TypeScript</a></td></tr><tr><td><code>createDraft</code></td><td>Given a base state, creates a mutable draft for which any modifications will be recorded</td><td><a href="/immer/async">Async</a></td></tr><tr><td><code>current</code></td><td>Given a draft object (doesn&#x27;t have to be a tree root), takes a snapshot of the current state of the draft</td><td><a href="/immer/current">Current</a></td></tr><tr><td><code>Draft&lt;T&gt;</code></td><td>Exposed TypeScript type to convert an immutable type to a mutable type</td><td><a href="/immer/typescript">TypeScript</a></td></tr><tr><td><code>enableAllPlugins()</code></td><td>Enables all plugins mentioned below</td><td><a href="/immer/installation#pick-your-immer-version">Installation</a></td></tr><tr><td><code>enableES5()</code></td><td>Enables support for older JavaScript engines, such as Internet Explorer and React Native</td><td><a href="/immer/installation#pick-your-immer-version">Installation</a></td></tr><tr><td><code>enableMapSet()</code></td><td>Enables support for <code>Map</code> and <code>Set</code> collections.</td><td><a href="/immer/installation#pick-your-immer-version">Installation</a></td></tr><tr><td><code>enablePatches()</code></td><td>Enables support for JSON patches.</td><td><a href="/immer/installation#pick-your-immer-version">Installation</a></td></tr><tr><td><code>finishDraft</code></td><td>Given an draft created using <code>createDraft</code>, seals the draft and produces and returns the next immutable state that captures all the changes</td><td><a href="/immer/async">Async</a></td></tr><tr><td><code>freeze(obj, deep?)</code></td><td>Freezes draftable objects. Returns the original object. By default freezes shallowly, but if the second argument is <code>true</code> it will freeze recursively.</td><td></td></tr><tr><td><code>Immer</code></td><td>constructor that can be used to create a second &quot;immer&quot; instance (exposing all APIs listed in this instance), that doesn&#x27;t share its settings with global instance.</td><td></td></tr><tr><td><code>immerable</code></td><td>Symbol that can be added to a constructor or prototype, to indicate that Immer should treat the class as something that can be safely drafted</td><td><a href="/immer/complex-objects">Classes</a></td></tr><tr><td><code>Immutable&lt;T&gt;</code></td><td>Exposed TypeScript type to convert mutable types to immutable types</td><td></td></tr><tr><td><code>isDraft</code></td><td>Returns true if the given object is a draft object</td><td></td></tr><tr><td><code>isDraftable</code></td><td>Returns true if Immer is capable of turning this object into a draft. Which is true for: arrays, objects without prototype, objects with <code>Object</code> as their prototype, objects that have the <code>immerable</code> symbol on their constructor or prototype</td><td></td></tr><tr><td><code>nothing</code></td><td>Value that can be returned from a recipe, to indicate that the value <code>undefined</code> should be produced</td><td><a href="/immer/return">Return</a></td></tr><tr><td><code>original</code></td><td>Given a draft object (doesn&#x27;t have to be a tree root), returns the original object at the same path in the original state tree, if present</td><td><a href="/immer/original">Original</a></td></tr><tr><td><code>Patch</code></td><td>Exposed TypeScript type, describes the shape of an (inverse) patch object</td><td><a href="/immer/patches">Patches</a></td></tr><tr><td><code>produce</code></td><td>The core API of Immer, also exposed as the <code>default</code> export</td><td><a href="/immer/produce">Produce</a></td></tr><tr><td><code>produceWithPatches</code></td><td>Works the same as <code>produce</code>, but instead of just returning the produced object, it returns a tuple, consisting of <code>[result, patches, inversePatches]</code>.</td><td><a href="/immer/patches">Patches</a></td></tr><tr><td><code>setAutoFreeze</code></td><td>Enables / disables automatic freezing of the trees produces. By default enabled.</td><td><a href="/immer/freezing">Freezing</a></td></tr><tr><td><code>setUseProxies</code></td><td>Can be used to disable or force the use of <code>Proxy</code> objects. Useful when filing bug reports.</td><td></td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="importing-immer"></a>Importing immer<a class="hash-link" href="#importing-immer" title="Direct link to heading">#</a></h2><p><code>produce</code> is exposed as the default export, but optionally it can be used as name import as well, as this benefits some older project setups. So the following imports are all correct, where the first is recommended:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-javascript codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> produce </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;immer&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">produce</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;immer&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">produce</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;immer&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> produce </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;immer&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">produce</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> produce </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;immer&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token keyword module" style="font-style:italic">default</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> unleashTheMagic </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;immer&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">produce </span><span class="token keyword module" style="font-style:italic">as</span><span class="token plain"> unleashTheMagic</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;immer&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/immerjs/immer/edit/master/website/docs/api.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/immer/update-patterns"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Update patterns</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/immer/map-set"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Map and Set Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#importing-immer" class="table-of-contents__link">Importing immer</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Michel Weststrate</div></div></div></footer></div>
<script src="/immer/styles.5695f530.js"></script>
<script src="/immer/runtime~main.37234080.js"></script>
<script src="/immer/main.9b3711a3.js"></script>
<script src="/immer/1.d0155db0.js"></script>
<script src="/immer/2.b57f8157.js"></script>
<script src="/immer/30.73c69c5f.js"></script>
<script src="/immer/935f2afb.211114bc.js"></script>
<script src="/immer/17896441.b75952fb.js"></script>
<script src="/immer/5fbc5cf1.ae565c98.js"></script>
</body>
</html>