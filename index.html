<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-65632006-3","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<script src="https://buttons.github.io/buttons.js"></script>
<script src="https://media.ethicalads.io/media/client/ethicalads.min.js"></script><title data-react-helmet="true">Introduction to Immer | Immer</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Introduction to Immer | Immer"><meta data-react-helmet="true" name="description" content="Immer"><meta data-react-helmet="true" property="og:description" content="Immer"><meta data-react-helmet="true" property="og:url" content="https://immerjs.github.io//immer/"><link data-react-helmet="true" rel="shortcut icon" href="/immer/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://immerjs.github.io//immer/"><script data-react-helmet="true">document.addEventListener("DOMContentLoaded",(function(){var n=document.getElementById("base-url-issue-banner-container");if(n){var e=window.location.pathname,t="/"===e.substr(-1)?e:e+"/";n.innerHTML=t}}))</script><link rel="stylesheet" href="/immer/styles.8d39bcb7.css">
<link rel="preload" href="/immer/styles.5695f530.js" as="script">
<link rel="preload" href="/immer/runtime~main.37234080.js" as="script">
<link rel="preload" href="/immer/main.9b3711a3.js" as="script">
<link rel="preload" href="/immer/1.d0155db0.js" as="script">
<link rel="preload" href="/immer/2.b57f8157.js" as="script">
<link rel="preload" href="/immer/30.73c69c5f.js" as="script">
<link rel="preload" href="/immer/935f2afb.211114bc.js" as="script">
<link rel="preload" href="/immer/17896441.b75952fb.js" as="script">
<link rel="preload" href="/immer/a09c2993.ee46293c.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div class="baseUrlIssueBanner_1-cE" style="border:solid red thick;background-color:#ffe6b3;margin:20px;padding:20px;font-size:20px"><p style="font-weight:bold;font-size:30px">Your Docusaurus site did not load properly.</p><p>A very common reason is a wrong site <a href="https://v2.docusaurus.io/docs/docusaurus.config.js/#baseurl" style="font-weight:bold">baseUrl configuration</a>.</p><p>Current configured baseUrl = <span style="font-weight:bold;color:red">/immer/</span> </p><p>We suggest trying baseUrl = <span style="font-weight:bold;color:green" id="base-url-issue-banner-container"></span> </p></div><nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><div class="announcementBar_1JSk" style="background-color:#20232a;color:#fff" role="banner"><div class="announcementBarContent_2EqR">Support Ukraine ðŸ‡ºðŸ‡¦ <a target="_blank" rel="noopener noreferrer" href="https://opensource.fb.com/support-ukraine">Help Provide Humanitarian Aid to Ukraine</a>.</div></div><nav class="navbar navbar--fixed-top navbar--dark"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/immer/"><img src="/immer/img/immer-logo.svg" alt="Immer Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/immer/img/immer-logo.svg" alt="Immer Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Immer</strong></a><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a class="navbar__item navbar__link">en</a><ul class="dropdown__menu"><li><a href="/immer/" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">en</a></li><li><a href="/immer/zh-CN/" target="_self" rel="noopener noreferrer" class="dropdown__link">zh-CN</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active navbar__link--active" href="/immer/">Documentation</a><a href="https://github.com/immerjs/immer" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><a class="navbar__item navbar__link navbar__link--active" href="/immer/support">Support Immer</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/immer/"><img src="/immer/img/immer-logo.svg" alt="Immer Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/immer/img/immer-logo.svg" alt="Immer Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Immer</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active navbar__link--active" href="/immer/">Documentation</a></li><li class="menu__list-item"><a href="https://github.com/immerjs/immer" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/immer/support">Support Immer</a></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="menu__link menu__link--sublist">Languages</a><ul class="menu__list"><li class="menu__list-item"><a href="/immer/" target="_self" rel="noopener noreferrer" class="menu__link dropdown__link--active">en</a></li><li class="menu__list-item"><a href="/immer/zh-CN/" target="_self" rel="noopener noreferrer" class="menu__link">zh-CN</a></li></ul></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Basics</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/immer/">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/immer/installation">Installation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/immer/produce">Using produce</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/immer/curried-produce">Curried producers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/immer/example-setstate">React &amp; Immer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/immer/update-patterns">Update patterns</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Advanced Features</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/immer/api">API overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/immer/map-set">Map and Set</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/immer/complex-objects">Classes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/immer/current">Current</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/immer/original">Original</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/immer/patches">Patches</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/immer/freezing">Auto freezing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/immer/return">Returning new data from producers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/immer/async">Async produce / createDraft</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/immer/typescript">TypeScript / Flow</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Resources</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/immer/performance">Immer performance</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/immer/resources">External resources</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/immer/faq">FAQ</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/immer/pitfalls">Pitfalls</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/immer/built-with">Built with Immer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/immer/support">Supporting immer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/immer/other-lang">Porting to other languages</a></li></ul></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">Introduction to Immer</h1></header><div class="markdown"><center><div data-ea-publisher="immerjs" data-ea-type="image" class="horizontal bordered"></div></center><img src="/immer/img/immer-logo.svg" height="200px" align="right"><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="immer"></a>Immer<a class="hash-link" href="#immer" title="Direct link to heading">#</a></h1><p>Immer (German for: always) is a tiny package that allows you to work with immutable state in a more convenient way.</p><blockquote><p>Immer is life-changing as a JS dev, and I&#x27;m not even exaggerating :) Like, it&#x27;s right up there with Prettier in terms of &quot;wow this package is amazing, how did I ever live without it?&quot; --Mark Erikson, (the) Redux Maintainer, @replayio</p></blockquote><p>Winner of the &quot;Breakthrough of the year&quot; <a href="https://osawards.com/react/" target="_blank" rel="noopener noreferrer">React open source award</a> and &quot;Most impactful contribution&quot; <a href="https://osawards.com/javascript/" target="_blank" rel="noopener noreferrer">JavaScript open source award</a> in 2019.</p><hr><ul><li>Introduction blogpost: <a href="https://medium.com/@mweststrate/introducing-immer-immutability-the-easy-way-9d73d8f71cb3" target="_blank" rel="noopener noreferrer">Immer: Immutability the easy way</a></li><li>Short Egghead.io lesson covering the Immer essentials: <a href="https://egghead.io/lessons/redux-simplify-creating-immutable-data-trees-with-immer" target="_blank" rel="noopener noreferrer">Simplify creating immutable data trees with Immer (7m)</a></li><li>Free in-depth Egghead.io course: <a href="https://egghead.io/courses/immutable-javascript-data-structures-with-immer" target="_blank" rel="noopener noreferrer">Immutable JavaScript Data Structures with Immer (58m)</a></li></ul><hr><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="immer-simplifies-handling-immutable-data-structures"></a>Immer simplifies handling immutable data structures<a class="hash-link" href="#immer-simplifies-handling-immutable-data-structures" title="Direct link to heading">#</a></h3><p>Immer can be used in any context in which immutable data structures need to be used. For example in combination with React state, React or Redux reducers, or configuration management. Immutable data structures allow for (efficient) change detection: if the reference to an object didn&#x27;t change, the object itself did not change. In addition, it makes cloning relatively cheap: Unchanged parts of a data tree don&#x27;t need to be copied and are shared in memory with older versions of the same state.</p><p>Generally speaking, these benefits can be achieved by making sure you never change any property of an object, array or map, but by always creating an altered copy instead. In practice this can result in code that is quite cumbersome to write, and it is easy to accidentally violate those constraints. Immer will help you to follow the immutable data paradigm by addressing these pain points:</p><ol><li>Immer will detect accidental mutations and throw an error.</li><li>Immer will remove the need for the typical boilerplate code that is needed when creating deep updates to immutable objects: Without Immer, object copies need to be made by hand at every level. Typically by using a lot of <code>...</code> spread operations. When using Immer, changes are made to a <code>draft</code> object, that records the changes and takes care of creating the necessary copies, without ever affecting the original object.</li><li>When using Immer, you don&#x27;t need to learn dedicated APIs or data structures to benefit from the paradigm. With Immer you&#x27;ll use plain JavaScript data structures, and use the well-known mutable JavaScript APIs, but safely.</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="a-quick-example-for-comparison"></a>A quick example for comparison<a class="hash-link" href="#a-quick-example-for-comparison" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-javascript codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> baseState </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        title</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Learn TypeScript&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        done</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        title</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Try Immer&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        done</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Imagine we have the above base state, and we&#x27;ll need to update the second todo, and add a third one. However, we don&#x27;t want to mutate the original <code>baseState</code>, and we want to avoid deep cloning as well (to preserve the first todo).</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="without-immer"></a>Without Immer<a class="hash-link" href="#without-immer" title="Direct link to heading">#</a></h4><p>Without Immer, we&#x27;ll have to carefully shallow copy every level of the state structure that is affected by our change:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-javascript codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> nextState </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> baseState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">slice</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// shallow clone the array</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">nextState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// replace element 1...</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token spread operator" style="color:rgb(137, 221, 255)">...</span><span class="token plain">nextState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// with a shallow clone of element 1</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    done</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// ...combined with the desired update</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// since nextState was freshly cloned, using push is safe here,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// but doing the same thing at any arbitrary time in the future would</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// violate the immutability principles and introduce a bug!</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">nextState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">push</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">title</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Tweet about it&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="with-immer"></a>With Immer<a class="hash-link" href="#with-immer" title="Direct link to heading">#</a></h4><p>With Immer, this process is more straightforward. We can leverage the <code>produce</code> function, which takes as first argument the state we want to start from, and as second argument we pass a function, called the <em>recipe</em>, that is passed a <code>draft</code> to which we can apply straightforward mutations. Those mutations are recorded and used to produce the next state once the recipe is done. <code>produce</code> will take care of all the necessary copying, and protect against future accidental modifications as well by freezing the data.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-javascript codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> produce </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;immer&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> nextState </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">produce</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">baseState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token parameter">draft</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    draft</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">done</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    draft</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">push</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">title</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Tweet about it&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Looking for Immer in combination with React? Feel free to skip ahead to the <a href="/immer/example-setstate">React + Immer</a> page.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="how-immer-works"></a>How Immer works<a class="hash-link" href="#how-immer-works" title="Direct link to heading">#</a></h3><p>The basic idea is that with Immer you will apply all your changes to a temporary <em>draft</em>, which is a proxy of the <em>currentState</em>. Once all your mutations are completed, Immer will produce the <em>nextState</em> based on the mutations to the draft state. This means that you can interact with your data by simply modifying it while keeping all the benefits of immutable data.</p><p><img alt="immer-hd.png" src="/immer/assets/images/immer-4002b3fd2cfd3aa66c62ecc525663c0d.png"></p><p>Using Immer is like having a personal assistant. The assistant takes a letter (the current state) and gives you a copy (draft) to jot changes onto. Once you are done, the assistant will take your draft and produce the real immutable, final letter for you (the next state).</p><p>Head to the <a href="/immer/produce">next section</a> to further dive into <code>produce</code>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="benefits"></a>Benefits<a class="hash-link" href="#benefits" title="Direct link to heading">#</a></h2><ul><li>Follow the immutable data paradigm, while using normal JavaScript objects, arrays, Sets and Maps. No new APIs or &quot;mutation patterns&quot; to learn!</li><li>Strongly typed, no string based paths selectors etc.</li><li>Structural sharing out of the box</li><li>Object freezing out of the box</li><li>Deep updates are a breeze</li><li>Boilerplate reduction. Less noise, more concise code.</li><li>First class support for JSON patches</li><li>Small: 3KB gzipped</li></ul></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/immerjs/immer/edit/master/website/docs/introduction.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/immer/installation"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Installation Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#immer-simplifies-handling-immutable-data-structures" class="table-of-contents__link">Immer simplifies handling immutable data structures</a></li><li><a href="#a-quick-example-for-comparison" class="table-of-contents__link">A quick example for comparison</a></li><li><a href="#how-immer-works" class="table-of-contents__link">How Immer works</a></li><li><a href="#benefits" class="table-of-contents__link">Benefits</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Michel Weststrate</div></div></div></footer></div>
<script src="/immer/styles.5695f530.js"></script>
<script src="/immer/runtime~main.37234080.js"></script>
<script src="/immer/main.9b3711a3.js"></script>
<script src="/immer/1.d0155db0.js"></script>
<script src="/immer/2.b57f8157.js"></script>
<script src="/immer/30.73c69c5f.js"></script>
<script src="/immer/935f2afb.211114bc.js"></script>
<script src="/immer/17896441.b75952fb.js"></script>
<script src="/immer/a09c2993.ee46293c.js"></script>
</body>
</html>